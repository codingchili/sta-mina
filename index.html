<!doctype html>
<html>
<script>
    var mode = 'dom';
    let template;
    let data;

    function download(callback, resource) {
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                callback(xhttp.responseText);
            }
        };
        xhttp.open("GET", resource, true);
        xhttp.send();
    }

    function onData() {
        if (this.template != null && this.data != null) {
            let theme = this.data.theme;
            let text = this.data.text;
            let contact = this.data.contact;
            let external = this.data.external;
            let seo = this.data.seo;

            if (this.mode === 'dom') {
                document.open();
                document.write(eval('`' + this.template + '`'));
                document.close();
            } else if (this.mode === 'inner') {
                document.body.innerHTML = eval('`' + this.template + '`');
            } else {
                alert(`unsupported rendering mode ${this.mode}.`);
            }
        }
    }

    download((template) => {
        this.template = template;
        onData();
    }, 'templates/git-project.html');

    download((data) => {
        this.data = JSON.parse(data);
        onData();
    }, 'sites/excelastic.json');

</script>
<body bgcolor="black"></body>
</html>