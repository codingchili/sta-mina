<!doctype html>
<html>
<script>
    var mode = 'dom';
    let template;
    let data;

    function download(callback, resource) {
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                callback(xhttp.responseText);
            }
        };
        xhttp.open("GET", resource, true);
        xhttp.send();
    }

    function onData() {
        if (this.template != null && this.data != null) {

            // don't require 'this.data' within template.
            let theme = this.data.theme;
            let text = this.data.text;
            let contact = this.data.contact;
            let external = this.data.external;

            if (this.mode === 'dom') {
                document.open();
                document.write(eval('`' + this.template + '`'));
                document.close();
            } else if (this.mode === 'inner') {
                document.body.innerHTML = eval('`' + this.template + '`');
            } else {
                alert(`unsupported rendering mode ${this.mode}.`);
            }
        }
    }

    // todo:  parameterize template and data for use with sed.
    // todo: create a zip of the package

    download((template) => {
        this.template = template;
        onData();
    }, 'template/template.html');

    download((data) => {
        this.data = JSON.parse(data);
        onData();
    }, 'template/data.json');

</script>
<body bgcolor="black">
</body>
</html>
